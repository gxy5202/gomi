---
import Layout from "../layouts/Layout.astro";
import ContributionTimeline from "../components/contributions/ContributionTimeline.tsx";
import { getContributions } from "../config";

// 开源贡献数据
const contributions = getContributions();
---

<Layout title="Open Source Contributions - Gomi" transition:animate="fade">
  <div class="max-w-4xl mx-auto py-12 px-4">
    <div class="mb-12">
      <h1 class="text-4xl font-bold mb-4">Open Source Contributions</h1>
      
      <!-- 项目展示区域 -->
      <div class="mt-8 flex flex-wrap gap-6">
        {
          Array.from(new Set(contributions.map(c => c.project)))
            .map(project => {
              const orgName = project.split('/')[0];
              const iconUrl = `https://github.com/${orgName}.png`;
              return { project, orgName, iconUrl };
            })
            .map(({ project, iconUrl, orgName }) => (
              <div class="flex flex-col items-center group cursor-pointer hover:opacity-80 transition-opacity">
                <img
                  src={iconUrl}
                  alt={project}
                  class="w-12 h-12 rounded-full mb-2 border-2 border-gray-600 group-hover:border-gray-400 transition-colors object-contain"
                  loading="lazy"
                  onerror={`this.onerror=null; this.src='https://github.com/identicons/${orgName}.png'`}
                />
                <span class="text-sm text-gray-300 text-center max-w-[100px] truncate" title={project}>
                  {project}
                </span>
              </div>
            ))
        }
      </div>
    </div>
    
    <ContributionTimeline client:load contributions={contributions} />
  </div>
</Layout>

<style>
</style>
